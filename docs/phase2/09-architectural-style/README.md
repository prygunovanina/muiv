# Выбор архитектурного стиля

Для системы делопроизводства выбран микросервисный архитектурный стиль с элементами событийно-ориентированной архитектуры.

## Обоснование выбора

### Масштабируемость
Различные подсистемы испытывают неравномерную нагрузку. Подсистема регистрации документов активно используется в начале рабочего дня, подсистема поиска - в течение всего дня, подсистема формирования отчетов - периодически. Микросервисная архитектура позволяет масштабировать каждый сервис независимо.

### Гибкость развития
Возможность независимого обновления компонентов без остановки всей системы. Микросервисная архитектура обеспечивает развертывание новых версий отдельных сервисов без влияния на работу остальных компонентов.

### Технологическое разнообразие
Сервис полнотекстового поиска оптимально реализовать на ElasticSearch, сервис обработки документов может использовать Python с библиотеками машинного обучения, основные бизнес-сервисы реализуются на Java с Spring Boot.

### Организационные требования
Работа нескольких команд над различными частями системы. Микросервисная архитектура обеспечивает слабую связанность между компонентами.

### Событийно-ориентированная архитектура
При создании или изменении документа генерируется событие, которое обрабатывается заинтересованными сервисами. Это обеспечивает слабую связанность и позволяет добавлять новых подписчиков без модификации публикующих сервисов.

## Применяемые паттерны

### API Gateway
Единая точка входа в систему

#### Функции
- Скрытие внутренней структуры микросервисов
- Маршрутизация запросов
- Агрегация ответов
- Аутентификация
- Ограничение частоты запросов

### Service Discovery
Динамическое обнаружение сервисов

#### Функции
- Регистрация сервисов при запуске
- Предоставление информации о расположении
- Автоматическое переключение на резервные экземпляры

### Circuit Breaker
Предотвращение каскадных отказов

#### Функции
- Прекращение попыток обращения к проблемному сервису
- Возврат fallback-ответа или кешированных данных
- Автоматическое возобновление после восстановления

### Database per Service
Обеспечение автономности сервисов

#### Функции
- Собственное хранилище данных для каждого сервиса
- Предотвращение связанности через общую БД
- Выбор оптимального типа хранилища

### Saga
Реализация распределенных транзакций

#### Функции
- Последовательность локальных транзакций
- Компенсирующие действия при сбоях
- Обеспечение eventual consistency

### CQRS
Разделение операций чтения и записи

#### Функции
- Модель для команд оптимизирована для целостности
- Модель для запросов оптимизирована для производительности
- Синхронизация моделей через события

## Характеристики выбранной архитектуры

### Преимущества
- Масштабируемость
- Доступность
- Производительность
- Модифицируемость

### Недостатки
- Более сложная инфраструктура
- Требования к мониторингу
- Управление конфигурацией
