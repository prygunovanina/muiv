# Распределение подсистем

Распределенная архитектура системы делопроизводства спроектирована с учетом принципов микросервисной архитектуры.

## Сервис аутентификации и авторизации

### Назначение
Подсистема управления пользователями и правами доступа

### Функциональность
- REST API для проверки учетных данных
- Выдача токенов доступа
- Верификация токенов

### Размещение
Отдельный сервер с повышенными требованиями к безопасности, изолированный от публичной сети. Взаимодействие через защищенные каналы с TLS.

## Сервис управления метаданными документов

### Назначение
Подсистема регистрации и учета документов

### Функциональность
- Хранение информации о карточках документов
- Управление реквизитами, связями и статусами
- Публикация событий об изменениях

### Размещение
Серверы приложений с горизонтальным масштабированием при росте нагрузки.

## Файловый сервис

### Назначение
Подсистема хранения файлов документов

### Функциональность
- Использование объектного хранилища MinIO
- API загрузки, скачивания и удаления файлов
- Контроль доступа через временные подписанные URL

### Преимущества
- Эффективное хранение больших объемов
- Простота масштабирования и репликации

## Сервис полнотекстового поиска

### Назначение
Подсистема поиска и навигации

### Функциональность
- ElasticSearch в кластерной конфигурации
- Асинхронная индексация через шину сообщений
- Обработка и обновление индекса поиска

## Сервис управления бизнес-процессами

### Назначение
Подсистема маршрутизации и согласования

### Функциональность
- Хранение схем маршрутов
- Управление экземплярами процессов согласования
- Отслеживание выполнения задач

### Размещение
Отдельные серверы с кластеризацией для отказоустойчивости.

## Сервис формирования отчетов

### Назначение
Подсистема отчетности и аналитики

### Функциональность
- Обработка запросов на генерацию отчетов
- Обращение к источникам данных
- Формирование отчетов в требуемом формате
- Асинхронная обработка тяжелых отчетов

## Сервис уведомлений

### Назначение
Информирование пользователей

### Функциональность
- Отправка уведомлений: email, push, внутренние
- Подписка на события от других подсистем
- Отправка в соответствии с настройками пользователей

## API Gateway

### Назначение
Единая точка входа для клиентских приложений

### Функциональность
- Маршрутизация запросов к сервисам
- Агрегация ответов от нескольких сервисов
- Балансировка нагрузки
- Кеширование часто запрашиваемых данных
- Проверка токенов доступа
- Ограничение частоты запросов

## Service Discovery

### Назначение
Динамическое обнаружение сервисов

### Функциональность
- Регистрация сервисов при запуске
- Предоставление информации о расположении сервисов
- Автоматическое переключение на резервные экземпляры

## Configuration Server

### Назначение
Централизованное управление конфигурацией

### Функциональность
- Изменение настроек без перезапуска сервисов
- Обеспечение единообразия конфигурации

## Шина сообщений

### Назначение
Асинхронное взаимодействие между сервисами

### Функциональность
- Apache Kafka для публикации событий
- Создание, изменение и удаление документов
- Изменение статусов процессов

## Распределение по серверам

Выполнено с учетом требований к производительности, безопасности и отказоустойчивости. Критически важные сервисы развернуты в кластерной конфигурации с репликацией данных.
