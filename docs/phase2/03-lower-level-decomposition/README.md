# Нижний уровень декомпозиции

Для детального рассмотрения выбрана подсистема регистрации и учета документов как одна из центральных в функциональности системы.

## Модуль создания карточки документа

### Компонент генерации регистрационного номера

#### Функциональность
- Формирование уникальных номеров документов
- Поддержка схем нумерации: сквозная, по подразделениям, по типам
- Взаимодействие с БД для обеспечения уникальности
- Предотвращение коллизий при конкурентном создании

### Компонент ввода реквизитов

#### Функциональность
- Пользовательский интерфейс для заполнения метаданных
- Валидация вводимых данных
- Автозаполнение связанных полей
- Подсказки на основе ранее использованных значений

### Компонент управления вложениями

#### Функциональность
- Загрузка файлов документа
- Проверка типов и размеров файлов
- Антивирусное сканирование
- Генерация превью для графических документов
- Извлечение метаданных из офисных форматов

## Модуль классификации и категоризации

### Компонент работы с номенклатурой дел

#### Функциональность
- Выбор дела для включения документа
- Создание нового дела
- Проверка соответствия характеристикам
- Контроль сроков хранения

### Компонент назначения категорий и меток

#### Функциональность
- Иерархическая структура категорий
- Множественные метки на документе
- Управление доступом на основе категорий

## Модуль связей и ссылок

### Компонент управления связями между документами

#### Функциональность
- Создание связей: "ответ на", "приложение к", "заменяет", "связан с"
- Визуализация графа связанных документов
- Автоматическое обновление статусов
- Контроль целостности при удалении

### Компонент ссылок на внешние ресурсы

#### Функциональность
- Хранение URL внешних документов
- Проверка доступности ресурсов
- Автоматическое обновление информации

## Модуль валидации и контроля качества

### Компонент проверки обязательных полей

#### Функциональность
- Контроль заполнения необходимых реквизитов
- Информативные сообщения об ошибках
- Блокировка сохранения невалидных данных

### Компонент проверки корректности данных

#### Функциональность
- Сложные правила валидации
- Проверка соответствия дат логике документа
- Контроль корректности ссылок на справочники

## Модуль истории изменений

### Компонент версионирования карточки документа

#### Функциональность
- Сохранение всех изменений метаданных
- Просмотр истории изменений
- Откат к предыдущим версиям

### Компонент аудита действий

#### Функциональность
- Журналирование всех операций
- Фиксация пользователя, времени и характера действия
- Защита журнала от модификации

## Взаимодействие компонентов

Взаимодействие организовано по принципу событийно-ориентированной архитектуры. Компонент управления вложениями работает асинхронно, не блокируя пользовательский интерфейс при загрузке больших файлов.
